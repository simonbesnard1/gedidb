# Quality filters for the different granules

level_1b: None
  
level_2a:
  # elevation_difference_tdx : = elev_lowestmode - digital_elevation_model
  quality_flag: '==1'
  sensitivity_a0:
    - '>=0.9'
    - '<=1.0'
  sensitivity_a2:
    - '>0.95'
    - '<=1.0'
  degrade_flag: 'in [0,3,8,10,13,18,20,23,28,30,33,38,40,43,48,60,63,68]' # QDEGRADE
  rh_100:
    - '>=0'
    - '<120'
  surface_flag: '==1'
  elevation_difference_tdx:
    - '>-150'
    - '<150'
  drop:
    - 'quality_flag'
    - 'surface_flag'

level_2b:
  # elevation_difference_tdx = elev_lowestmode - digital_elevation_model
  l2a_quality_flag: '==1'
  l2b_quality_flag: '==1'
  sensitivity:
    - '>=0.9'
    - '<=1.0'
  degrade_flag: 'in [0,3,8,10,13,18,20,23,28,30,33,38,40,43,48,60,63,68]' # QDEGRADE
  rh100:
    - '>=0'
    - '<12000'
  surface_flag: '==1'
  elevation_difference_tdx:
    - '>-150'
    - '<150'
  water_persistence: '<10'
  urban_proportion: '<50'
  pai: '!=-9999.0'
  drop:
    - 'l2a_quality_flag'
    - 'l2b_quality_flag'
    - 'algorithmrun_flag'
    - 'surface_flag'

level_4a:
  l2_quality_flag: '==1'
  sensitivity_a0:
    - '>=0.9'
    - '<=1.0'
  sensitivity_a2: '<=1.0'
  degrade_flag: 'in [0,3,8,10,13,18,20,23,28,30,33,38,40,43,48,60,63,68]' # QDEGRADE
  surface_flag : '==1'
  # pft_class == 2 & sensitivity_a2 > 0.98 | pft_class != 2 & sensitivity_a2 > 0.95
  landsat_water_persistence: '<10'
  urban_proportion: '<50'

level_4c:
  l2_quality_flag: '==1'
  sensitivity_a0:
    - '>=0.9'
    - '<=1.0'
  sensitivity_a2: '<=1.0'
  degrade_flag: 'in [0,3,8,10,13,18,20,23,28,30,33,38,40,43,48,60,63,68]' # QDEGRADE
  surface_flag : '==1'
  # pft_class == 2 & sensitivity_a2 > 0.98 | pft_class != 2 & sensitivity_a2 > 0.95
  landsat_water_persistence: '<10'
  urban_proportion: '<50'
